# 2026-02-22-22-10-设计-ModelWrite写作助手功能与UI全量梳理

## 1. 总体视觉与交互风格 (Design Philosophy)
*   **沉浸感 (Immersion)**: 背景采用 `Ice Gray (#F8F9FB)` 侧边栏与纯白画布，文字系统以 `Playfair Display` (衬线) 与 `JetBrains Mono` (等宽) 混合，模拟纸张印刷的高级感与创作的专业感。
*   **透明协作 (Transparent Collaboration)**: 强调 AI 并非“代写”，而是“共创”。通过视觉状态标记（黑/黄/蓝）展示 AI 的后台工作。

## 2. 三栏式隔离布局 (Three-Pane Layout)

### 2.1 左侧：基石栏 (Lore Sidebar - Foundation)
*   **简介区**: “由 Ling 系列不同尺寸模型综合驱动的写作助手”。
*   **Summary (大纲预览)**:
    *   **UI**: 紧凑的卡片预览。
    *   **交互**: 点击触发 `SummaryDialog`。内置等宽编辑器，支持详尽情节 (Plot) 编写。
*   **Knowledge Base (知识库三元组)**:
    *   **分类**: World Settings (世界观), Key Concepts (核心概念), Characters (角色)。
    *   **二段式视觉**: 
        *   *Manual (实色)*: 用户手动录入或已认可。
        *   *Auto-detected (虚线/浅色)*: AI 自动识别但未经审核。
    *   **条目转正交互**: 点击 AI 识别条目弹出详情，点击“采纳建议”后条目边框变为实线。
*   **条目详情弹窗 (EntryDialog)**:
    *   **左侧**: 用户可编辑的正式定义。
    *   **右侧 (AI Suggestions)**: 展示离散的、具备随机性的 AI 建议碎片。
    *   **缝合功能**: 点击碎片内容自动追加到左侧编辑器。

### 2.2 中间：协作画布 (Main Canvas - Collaboration)
*   **布局比例**: 7:3 的 Grid 布局。
    *   **左 70% (Writing Area)**: `JetBrains Mono` 字体，行高 1.9。
    *   **右 30% (Insight Margin)**: 预处理概要栏。
*   **片段化视觉 (Segment States)**:
    *   **正在书写 (Raw - 纯黑)**: 当前编辑的活跃段落。
    *   **处理中 (Processing - 琥珀黄)**: 后台正在进行异步摘要/实体提取。
    *   **处理完成 (Completed - 深靛蓝)**: 已建立索引，内容沉淀。
*   **Insight Margin 细节**:
    *   **单句摘要**: 浮动在对应段落右侧，微缩斜体。
    *   **实体药丸 (Entity Pills)**: 摘要下方的微型 Badge，展示检测到的条目。
*   **行内补全 (Ghost Text)**:
    *   **视觉**: 浅灰色文本接在光标后。
    *   **确认**: 用户按 `Tab` 或点击文本直接插入。

### 2.3 右侧：灵感与动作栏 (Intelligence Sidebar)
*   **主动动作区 (Writer Actions)**:
    *   **Continue Writing (续写)**: 全局触发，生成新段落。
    *   **Selection Tools (局部处理)**: 只有在选中文字时激活。包含 Rewrite (重写)、Expand (扩写)、Refine (润色)。
*   **灵感卡片流 (Inspiration Cards)**:
    *   **分类**: Plot (剧情), Description (描写), Dialogue (对话)。
    *   **生命周期**: 具备 `Active` (引导中) 状态。点击激活后卡片高亮，并在 UI 顶部触发“正在引导生成”的呼吸灯提示。

### 2.4 系统调试器 (WriteStatusViewer)
*   **位置**: 界面左下角悬浮。
*   **监控维度**:
    1.  **Graph Status**: 5 个 Agent 的实时活跃度与节点路径。
    2.  **Tokens Count**: 每 50 字符更新一次推理进度。
    3.  **VFS/Kernel Heartbeat**: 监控文件同步与编辑器引擎健康。
