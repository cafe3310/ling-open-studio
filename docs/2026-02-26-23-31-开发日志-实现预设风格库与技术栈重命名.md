# 开发日志：实现预设风格库与技术栈重命名 (Model Web)

## 背景
用户基于 `designprompts.dev` 收集了大量设计风格。本项目需在 `Model Web` 模块中整合这些风格，作为风格选择的可选库，供 Agent 在生成网页时使用。同时，为加强图标库在网页生成中的应用，对现有技术栈进行品牌化重命名。

## 工作来源文档
- `docs/2026-02-25-designprompts-dev/info.md` (原始风格数据)
- `docs/reference/2026-02-07-设计-VFS-详细数据结构与接口.md` (视觉风格参考)

## 已实现功能

### 1. 风格库自动化生成 (Data/Prompt Engine)
- **批量转换**：将 29 个风格的 Markdown 文档通过脚本批量转换为 TypeScript `.ts` 模块。
- **最小化变更导出**：采用 `export default 
...
` 形式，仅对反引号和模板字符串标志位进行转义，确保数据完整性。
- **风格库入口**：创建 `style-library/index.ts` 统一管理和导出所有预设风格。

### 2. UI 界面开发 (UI/UX - Skeuomorphic & Glass)
- **侧边栏入口**：在 `WebConfig` 的风格网格末尾添加了「Select More」按钮，采用虚线边框设计。
- **风格库弹窗 (StyleLibraryDialog)**：
  - **视觉风格**：采用磨砂玻璃背景 (`backdrop-blur-2xl`)、细腻内阴影和微边框设计的拟物化风格。
  - **搜索功能**：支持通过关键字实时筛选 29 种风格。
  - **来源标注**：在每个风格卡片显式标注 `designprompts.dev`。
  - **图标统一**：所有库内风格统一使用 `Palette` 图标，保持界面整洁。

### 3. 技术栈重命名与 Lucide 集成
- **品牌化命名**：将 `HTML + Tailwind` 重命名为 **`HTML + Tailwind + Lucide`**。
- **样板代码增强**：
  - 在样板 HTML 中显式注入 Lucide 的 CDN 链接及初始化脚本 (`lucide.createIcons()`)。
  - 在生成 Prompt 中显式要求 Agent 使用 `<i data-lucide="icon-name"></i>` 语法。
- **语义化指令**：在 `CODE_GENERATOR_PROMPT` 中增强了对图标语义化命名的引导。

### 4. 架构优化与状态绑定
- **Zustand Store 扩展**：增加 `presetStylePrompt` 字段用于存储当前选中的预设提示词。
- **API 透传**：在 `app/api/chat/web/route.ts` 中实现了请求体配置的完整透传。
- **Graph 逻辑集成**：修改 `initial-gen.ts` 中的 `Style Director` 节点。
  - **核心发现**：不采用跳过策略，而是将选中的预设 Prompt 作为该节点的“设计指南”。
  - **优势**：让模型（Ling-2.5）对预设风格进行二次转写，能够有效解决跨模型 Prompt “水土不服”的问题，生成更符合业务逻辑的视觉规范。

## 验证与测试
- 验证了「Select More」弹窗的展示和搜索逻辑。
- 确认了技术栈名称变更在 UI 和 Prompt 中的生效。
- 确认了 `Style Director` 节点能够正确接收预设 Prompt 并生成稳定的视觉规范。

## 后续建议
- **清理工作**：后续可考虑清理临时生成的 `.md.ts` 文件名，统一后缀。
- **图标映射**：未来可考虑为预设风格库增加更有区分度的图标，或从 `designprompts.dev` 抓取截图作为预览。
