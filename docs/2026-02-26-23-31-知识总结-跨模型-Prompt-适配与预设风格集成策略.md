# 知识总结：跨模型 Prompt 适配与“预设风格”集成策略

## 背景与问题定义
在 `Model Web` 的开发过程中，我们集成了来自 `designprompts.dev` 的 29 种高质量网页设计风格（预设 Prompt）。最初的方案尝试通过 **“直连 (Direct Injection)”** 模式跳过设计节点，即直接将选中的预设风格提示词作为最终的视觉规范 (`visual_spec`) 传递给代码生成节点。

然而，在实际测试中发现，直接注入的预设提示词虽然在结构上是完整的，但在目标生成模型（如 `Ling-2.5`）面前出现了 **“水土不服”** 的现象，导致生成的网页布局混乱、配色偏差或组件遗漏。

## 核心发现与策略转变

### 1. 模型作为“翻译器”的必要性
我们的实验发现，**模型 A (人类或第三方模型) 撰写的精妙提示词，直接作为目标模型 B 的执行指令时效果往往不理想。**

*   **现象**：直接注入预设 Prompt 时，代码生成模型倾向于产生幻觉或机械模仿，缺乏对当前网页业务场景（如 PRD 需求）的深度融合。
*   **解决方案**：保留 LangGraph 中的 `Style Director` 节点。将预设风格提示词作为该节点的 **“参考指南 (Guidance)”** 而非 **“最终产物”**。
*   **效果**：通过让目标模型（B 模型）自己重新“转写”一遍预设风格，并结合当前产品的 PRD 需求，生成的 `visual_spec` 能够更好地对齐模型的内部词库和推理逻辑。

> **小技巧摘要**：A 模型的风格提示用在 B 模型上可能水土不服，但让 B 模型基于该提示词“自己写一遍”设计规范，整个生成流程就会非常顺畅。

### 2. Workflow 架构的“冗余价值”
在 Agent 架构设计中，有时看似冗余的中间节点（如风格导演节点）实际上起到了 **“指令对齐 (Instruction Alignment)”** 的关键作用。

*   **原始 Workflow**：`Idea Expander (B)` -> `Style Director (A)` -> `Code Generator (C)`。
*   **优化后的集成方式**：`Preset Prompt` -> `Style Director (A) [作为上下文注入]` -> `Code Generator (C)`。
*   **结论**：即使有了完美的预设，也不应跳过“思考”和“规划”阶段。模型在接收到一个预设风格后，重新产出一份基于该风格的、针对当前任务的 `visual_spec`，比直接使用通用预设要强大得多。

## 实施建议
对于未来的多模型集成或复杂 Prompt 注入任务：
1.  **避免强制注入**：除非来源和目标是同一模型且处于同一上下文环境。
2.  **拥抱转写**：将预设或第三方输入作为低层级（Low-level）的上下文约束，让当前 Graph 的主力模型进行解释性输出。
3.  **对齐技术栈**：在注入风格时，同步提供匹配的技术栈（如 `HTML + Tailwind + Lucide`）样板代码，减少模型在语法选择上的犹豫。
