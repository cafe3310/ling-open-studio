# è¯¦ç»†è®¾è®¡ï¼šModel Web ä¸Šä¸‹æ–‡å·¥ç¨‹ä¸ Prompt æ¶æ„

## 1. æ ¸å¿ƒåè®®ï¼šMarkdown é£æ ¼å®šç•Œå— (Delimited Blocks Protocol)

ä¸ºäº†é¿å…é•¿ä»£ç ç”Ÿæˆçš„è½¬ä¹‰é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨ `=== tool: param ===` æ ¼å¼ä½œä¸ºæ¨¡å‹è°ƒç”¨å·¥å…·å’Œç³»ç»Ÿè¿”å›ç»“æœçš„å®šç•Œç¬¦ã€‚

### 1.1 å·¥å…·è°ƒç”¨åè®® (Model Output)
- **å†™å…¥æ–‡ä»¶ (write_file)**: 
  ```text
  === write: /index.html ===
  <!DOCTYPE html>...å†…å®¹...
  ```
- **è¯»å–æ–‡ä»¶ (read_file)**: `=== read: /path/to/file ===`
- **åˆ—å‡ºç›®å½• (list_directory)**: `=== list: /workspace ===`

### 1.2 ç»“æœè¿”å›åè®® (System Input)
- **è¯»å–ç»“æœ (content)**:
  ```text
  === content: /index.html ===
  <html>...æºç å†…å®¹...
  ```
- **åˆ—è¡¨ç»“æœ (files)**:
  ```text
  === files: / ===
  - /index.html
  - /style.css
  ```

---

## 2. æ ¸å¿ƒç±»å‹å®šä¹‰ (Core Type Definitions)

### 2.1 è®¾è®¡é£æ ¼é€‰é¡¹ (Design Aesthetic)
```typescript
type DesignOption = {
  id: string;
  name: string; // æ˜¾ç¤ºçš„åå­— (e.g., "Modern Minimalist")
  icon: string; // Lucide icon name (e.g., "LayoutTemplate")
  
  // ä¸Šä¸‹æ–‡æè¿°ç‰‡æ®µ
  description_general: string; // ç»™æ¨¡å‹çš„æ•´ä½“é£æ ¼æè¿° (Node A & B)
  description_color: string;   // ç»™æ¨¡å‹çš„è‰²å½©æŒ‡å¯¼ (Node A)
  description_shape: string;   // ç»™æ¨¡å‹çš„æ ·å¼/å½¢çŠ¶æŒ‡å¯¼ (Node A)
  description_font: string;    // ç»™æ¨¡å‹çš„å­—ä½“æŒ‡å¯¼ (Node A)
}
```

### 2.2 æŠ€æœ¯æ ˆé€‰é¡¹ (Tech Stack)
```typescript
type TechStackOption = {
  id: string;
  name: string;
  description_style: string;
  description_expander: string;
  boilerplate_code: string;
}
```

---

## 3. Graph 1: Initial Generation (Context Engineering)

### èŠ‚ç‚¹ A: è®¾è®¡é£æ ¼ (Style Director)

**è¾“å…¥è¦å¦‚ä½•ç»„åˆï¼Ÿä»¥ typescript string template æè¿°**

ğŸŸ¥ 

**èŒè´£**: è¾“å‡ºå…·ä½“çš„è§†è§‰è§„èŒƒã€‚


**è¾“å‡º**: è§†è§‰è§„èŒƒ ğŸŸ¥çš„ markdown è¡¨è¾¾ï¼ŒåŒ…å«å…³é”® css æ ·å¼ï¼Œå­—ä½“ï¼Œtailwind è®¾è®¡ token ç­‰ã€‚

**ç¤ºä¾‹è¾“å‡º (Node A Output Example):**
```json
{
  "theme_name": "Modern Minimalist Coffee",
  "color_palette": {
    "bg": "#FFFFFF",
    "text": "#1A1A1A",
    "primary": "#8B5E3C",
    "accent": "#E6D5C3"
  },
  "typography": {
    "font_family": "Playfair Display, serif",
    "google_fonts_url": "https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400&display=swap"
  },
  "tailwind_tokens": {
    "radius": "rounded-2xl",
    "border": "border border-zinc-200",
    "shadow": "shadow-sm",
    "spacing": "gap-6",
    "container": "max-w-6xl mx-auto px-4"
  }
}
```

### èŠ‚ç‚¹ B: å……å®æ–¹æ¡ˆ (Idea Expander)

**è¾“å…¥è¦å¦‚ä½•ç»„åˆï¼Ÿä»¥ typescript string template æè¿°**

ğŸŸ¥ 

**èŒè´£**: å°†ç”¨æˆ·è¾“å…¥æ‰©å±•ä¸ºè¯¦ç»†çš„éœ€æ±‚æè¿°ã€‚


**è¾“å‡º**: ç»“æ„åŒ–çš„éœ€æ±‚æè¿° Markdownï¼ŒåŒ…å«é¡µé¢ç»“æ„ã€å…·ä½“çš„å†…å®¹ï¼Œç»„ä»¶è¯´æ˜ç­‰ã€‚


**ç¤ºä¾‹è¾“å‡º (Node B Output Example):**
```markdown
# Product Plan: Artisan Coffee Shop Landing Page

## Page Structure
1. **Header**: Sticky glassmorphism nav with Logo (left) and 'Menu', 'Our Story', 'Locations' (center), 'Order' (right).
2. **Hero Section**: High-resolution image of a ceramic cup. Headline: "Pure Origins", Subheadline: "Small-batch roasting for the curious soul."
3. **Features**: 3-column grid showing 'Direct Trade', 'Eco-conscious', and 'Master Roasters' with Lucide icons.
4. **Product Showcase**: Horizontal scroll or grid of signature beans.

## Content Strategy
- Headlines: Catchy, artisanal, and sophisticated.
- Tone: Warm but professional.

## Components
- `Navbar`: Uses `backdrop-blur`.
- `HeroButton`: Solid primary color, rounded-2xl.
- `ProductCard`: Minimalist, thin border, subtle shadow.
```

### èŠ‚ç‚¹ C: å…·ä½“ç”Ÿæˆ (Code Generator)

**è¾“å…¥çš„ç»„ç»‡æ–¹æ¡ˆï¼Œä»¥ typescript string template æè¿°**: {èŠ‚ç‚¹Cæç¤ºæ¨¡æ¿, ç”¨æˆ· prompt, èŠ‚ç‚¹Aè¾“å‡º, èŠ‚ç‚¹Bè¾“å‡º, VFS å·¥å…·æè¿°}

ğŸŸ¥ 

**èŒè´£**: æ ¹æ®è®¾è®¡è§„èŒƒå’Œäº§å“æ–¹æ¡ˆç”Ÿæˆå®Œæ•´ä»£ç ã€‚

**è¾“å…¥ä¾‹å­ (Node C Input Example):**
```text
# SYSTEM PROMPT
You are a Senior Frontend Developer. 
Your task is to write the COMPLETE code for a website based on the provided Design Spec and Product Plan.

# PROTOCOL (CRITICAL)
Use: === write: [file_path] === [Content]

# TECH STACK (HTML + Tailwind)
- Rules: {{tech_stack.description_style}}
- Boilerplate: {{tech_stack.boilerplate_code}}

# CONTEXT FROM PREVIOUS NODES
- **Visual Spec (Node A)**: 
  { "color_palette": { "bg": "#FFFFFF", "primary": "#8B5E3C"... }, "tailwind_tokens": { "radius": "rounded-2xl"... } }
- **Product Plan (Node B)**: 
  # Product Plan: Artisan Coffee Shop Landing Page ... (Section 1: Header, Section 2: Hero...)

# USER REQUEST
"Make a coffee shop website with a warm minimalist feel."
```

**ç¤ºä¾‹è¾“å‡º (Node C Output Example):**
```text
I will now implement the Artisan Coffee Shop landing page using the Swiss-inspired minimalist aesthetic.

=== write: /index.html ===
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
    </style>
</head>
<body class="bg-white text-zinc-900">
    <nav class="sticky top-0 bg-white/80 backdrop-blur-md z-50 ...">
        <!-- Header Content -->
    </nav>
    <main>
        <section class="max-w-6xl mx-auto py-20 ...">
            <h1 class="text-7xl font-bold text-[#8B5E3C]">Pure Origins</h1>
            ...
        </section>
    </main>
    <script>lucide.createIcons();</script>
</body>
</html>
```

---

## 4. Graph 2: Refinement (Context Engineering)

### èŠ‚ç‚¹ D: å¤„ç†é—®é¢˜å¹¶è¯†åˆ« (Editor/Reader)

**è¾“å…¥çš„ç»„ç»‡æ–¹æ¡ˆï¼Œä»¥ typescript string template æè¿°**: {D ç³»ç»Ÿæç¤ºæ¨¡æ¿, å½“å‰æ–‡ä»¶åˆ—è¡¨, VFS å·¥å…·æè¿°, ç”¨æˆ·æŒ‡ä»¤, æŠ¥é”™ä¿¡æ¯}

ğŸŸ¥ 

**ä»»åŠ¡**: è¯†åˆ«éœ€è¦è¯»å–çš„æ–‡ä»¶ã€‚

**ç¤ºä¾‹è¾“å‡º**:
```text
The user wants to change the hero background. I need to read the current code.

=== read: /index.html ===
```

### èŠ‚ç‚¹ E: è§£å†³é—®é¢˜ (Resolver/Writer)
**è¾“å…¥**: {E ç³»ç»Ÿæç¤ºæ¨¡æ¿, å½“å‰æ–‡ä»¶åˆ—è¡¨, VFS å·¥å…·æè¿°, ç”¨æˆ·æŒ‡ä»¤, èŠ‚ç‚¹ D è¾“å‡ºå†…å®¹}

ğŸŸ¥ 

**ä»»åŠ¡**: åº”ç”¨ä¿®æ”¹å¹¶å†™å›ã€‚

**ç¤ºä¾‹è¾“å…¥ (via Tool Output)**:
```text
=== content: /index.html ===
<!DOCTYPE html><html>... <section class="bg-white"> ... </html>
```

**ç¤ºä¾‹è¾“å‡º**:
```text
I have updated the hero background to use the new brand color.

=== write: /index.html ===
<!DOCTYPE html><html>... <section class="bg-[#FDFBF7]"> ... </html>
```
