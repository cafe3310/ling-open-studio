# 2026-02-07-17-30-开发日志-ModelWeb交互优化与架构容错修复

## 1. 背景 (Background)
在 Model Web 静态框架搭建完成后，通过回归测试发现从 Chat Tab 切换到 Web Tab 时会出现 React 卸载错误。同时，为了提升用户体验，需要对预览区的多模态展示和 Chat 引导逻辑进行深度微调。

## 2. 完成的工作 (Accomplishments)

### 2.1 架构级 Bug 修复
- **Runtime 提升 (Lifting)**: 解决了 `Tried to unmount a fiber that is already unmounted` 错误。
    - **原因**: 之前各 Tab 独立维护 Provider 导致切换时 React 树剧烈抖动。
    - **方案**: 在 `app/assistant.tsx` 顶层预创 `chatRuntime` 和 `webRuntime`，通过统一的 `AssistantRuntimeProvider` 实现平滑切换。

### 2.2 UI 交互进化
- **预览区增强**: 在 Web 预览工具栏新增了 **Files (项目文件)** 按钮。支持在“实时预览”与“VFS 文件列表”之间一键切换，允许用户直接在网页生成界面管理其产物。
- **组件可配置化**: 改造了 `Thread` 基础组件，新增 `suggestions` 属性，支持不同业务场景传入定制化的欢迎示例。
- **Web 引导优化**: 
    - 移除了冗余的 Steve Jobs 语录和模拟地址栏。
    - 为 Web Architect 定制了四种针对网页生成的快速指令（Landing Page, Portfolio 等）。
    - 重新排布了 Header 信息，增加了 Ready 状态标识和二级引导文案。

### 2.3 配置项对齐
- 调整了 `Design Aesthetic` 选项，将 `Minimal` 变更为 `Unspecified`（未指定），并确立了 `Modern` 为默认选中项。

## 3. 技术细节 (Technical Notes)
- **多 Runtime 共存**: 利用 `useChatRuntime` 在顶层保持长连接状态，切换 Tab 仅改变 Context 引用，不销毁实例，从而保留了会话上下文。
- **VFS 复用**: 在 WebTab 内部直接引用 `FilesystemTab` 并指定 `threadId="global"`，实现了全局文件系统的无缝嵌入。

## 4. 后续计划 (Next Steps)
- **VFS Tooling**: 核心库已就绪，下一步是将 `write_file`, `read_file`, `list_dir` 封装为 AI Tools。
- **WebGen Graph**: 实现真正的自动化生成链路逻辑。
